!function t(e,r,n){function u(o,s){if(!r[o]){if(!e[o]){var a="function"==typeof require&&require;if(!s&&a)return a(o,!0);if(i)return i(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var f=r[o]={exports:{}};e[o][0].call(f.exports,function(t){var r=e[o][1][t];return u(r?r:t)},f,f.exports,t,e,r,n)}return r[o].exports}for(var i="function"==typeof require&&require,o=0;o<n.length;o++)u(n[o]);return u}({1:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){var r=function(){function r(t,n){u(this,r),this.model=e,this.currentlyFetching=!1,this.opts=n,this.opts&&(this.opts.model&&(this.model=this.opts.model),this.opts.url&&(this.url=this.opts.url),this.opts.sort&&(this.sort=this.opts.sort),this.opts.comparator&&(this.comparator=this.opts.comparator),this.opts.parse&&"function"==typeof this.opts.parse&&(this.parse=this.opts.parse,delete this.opts.parse)),this.models=[],this.length=0,this.add(t,this.opts)}return o(r,[{key:"url",value:function(){}},{key:"parse",value:function(t){return t.data}},{key:"fetch",value:function(e){var r=this,n={merge:!0,parse:!0,method:"GET",url:(0,a["default"])(this).result("url")};e=a["default"].extend(n,e),e.params&&(e.params=a["default"].extend({},e.params)),e.data&&(e.data=a["default"].extend({},e.data)),this.currentlyFetching=!0;var u=t(e).then(function(t){return e.reset&&r.reset(),r.add(t,e),r});return u["finally"](function(){return r.currentlyFetching=!1}),u}},{key:"eq",value:function(t){if(this.models)return this.models[t]}},{key:"get",value:function(t){return(0,a["default"])(this.models).findWhere({id:t})}},{key:"remove",value:function(t){var e=this,r=!(0,a["default"])(t).isArray();r&&(t=[t]);var n=[];return(0,a["default"])(t).forEach(function(t){var r=e.indexOf(t);if(r!==-1)return n.push(t),e.models.splice(r,1),e.length--}),r?n[0]:n}},{key:"add",value:function(t,e){var r=this;if(e=a["default"].extend({sort:!0},e),e.parse&&(t=this.parse(t)),t){var n=!(0,a["default"])(t).isArray();t=n?[t]:t.slice();var u=[],i="undefined"==typeof e.at?this.length:e.at;return t.forEach(function(t){t=r._prepareModel(t,e);var n=r.get(t.id);return null==n?(u.push(t),r.length++,r.models.splice(i,0,t),i++):e.merge?n.set(t.attributes,e):void 0}),e.sort&&this.sort(),n?u[0]:u}}},{key:"create",value:function(t,e){var r=this.add(t,e);if(r)return r.save()}},{key:"clone",value:function(){return new this.constructor(this.toJSON(),this.opts)}},{key:"toJSON",value:function(){return a["default"].map(this.models,function(t){return t.toJSON()})}},{key:"reset",value:function(){return this.models=[],this.length=0,this}},{key:"sort",value:function(){if(this.comparator)return this.models.sort(this.comparator)}},{key:"_prepareModel",value:function(t,e){var n=void 0;return e=a["default"].extend({collection:this},e),t instanceof this.model||t instanceof r?(n=t,n.collection=this):n=new this.model(t,e),n}},{key:"pluck",value:function(t){return a["default"].invoke(this.models,"get",t)}},{key:"where",value:function(t,e){if(!t)return e?void 0:[];var r="filter";return e&&(r="find"),this[r](function(e){for(var r in t)if(t[r]!==e.get(r))return!1;return!0})}},{key:"findWhere",value:function(t){return this.where(t,!0)}}]),r}(),n=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain"];a["default"].each(n,function(t){return r.prototype[t]=function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return r.unshift(this.models),a["default"][t].apply(a["default"],r)}});var i=["groupBy","countBy","sortBy"];return a["default"].each(i,function(t){return r.prototype[t]=function(e,r){var n=a["default"].isFunction(e)?e:function(t){return t.get(e)};return a["default"][t](this.models,n,r)}}),r}Object.defineProperty(r,"__esModule",{value:!0});var o=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();r["default"]=i;var s=t("underscore"),a=n(s)},{underscore:"underscore"}],2:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}var u=t("./collection.js"),i=n(u),o=t("./model.js"),s=n(o),a=t("angular"),l=n(a);l["default"].module("fs.collections",[]).factory("BaseCollection",i["default"]).factory("BaseModel",s["default"])},{"./collection.js":1,"./model.js":3,angular:"angular"}],3:[function(t,e,r){"use strict";function n(t){return t&&t.__esModule?t:{"default":t}}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){var r=function(){function r(){var t=this,n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],i=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];u(this,r),this.urlRoot="",this.idAttribute="id",i.parse&&(n=this.parse(n)),this._eventBus=e.$new(),this._eventBus.destuctors={},this._eventBus.$on("$destroy",function(){return(0,l["default"])(t._eventBus.destuctors).each(function(t,e){return t.forEach(function(t){return t.unwatch()})})}),i.collection&&(this.collection=i.collection),i.urlRoot&&(this.urlRoot=i.urlRoot),i.idAttribute&&(this.idAttribute=i.idAttribute),i.defaults&&(this.defaults=i.defaults),this.attributes={},n=l["default"].extend({},n),n=l["default"].defaults(n,l["default"].result(this,"defaults")),this.set(n)}return s(r,[{key:"parse",value:function(t){return t.status&&t.headers?t.data:t}},{key:"_hasIdAttribute",value:function(t){return(0,l["default"])(Object.keys(t)).contains(this.idAttribute)}}]),s(r,[{key:"trigger",value:function(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return this._eventBus.$broadcast.apply(this._eventBus,e)}},{key:"on",value:function(t,e){this._eventBus.destuctors[t]||(this._eventBus.destuctors[t]=[]);var r=this._eventBus.destuctors[t],n=function(t,r){for(var n=arguments.length,u=Array(n>2?n-2:0),i=2;i<n;i++)u[i-2]=arguments[i];return e.apply(this,[r].concat(u))};return r.push({unwatch:this._eventBus.$on(t,n),original:e})}},{key:"off",value:function(t,e){var r=this._eventBus.destuctors[t]||[],n=[];return n=e?r.filter(function(t){return t.original===e}):r,n.forEach(function(t){return t.unwatch()})}},{key:"once",value:function(t,e){var r=this,n=function u(){for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];return r.off(t,u),e.apply(r,i)};return this.on(t,n)}},{key:"has",value:function(t){return null!=this.attributes[t]}},{key:"get",value:function(t){return this.attributes[t]}},{key:"set",value:function(t,e){var r=this,n=void 0;if(!t)return this;"object"===("undefined"==typeof t?"undefined":o(t))?n=t:(n={},n[t]=e);var u={};return this._hasIdAttribute(n)&&(this.id=n[this.idAttribute]),(0,l["default"])(n).each(function(t,e){return r.attributes[e]!==t&&(u[e]=t),r.attributes[e]=t}),this.trigger("change",this,u),(0,l["default"])(u).each(function(t,e){return r.trigger("change:"+e,r,t)}),this}},{key:"isNew",value:function(){return null==this.id}},{key:"url",value:function(){var t=l["default"].result(this,"urlRoot")||l["default"].result(this.collection,"url");if(this.isNew())return t;var e=encodeURIComponent(this.id);return t+("/"===t.charAt(t.length-1)?e:"/"+e)}},{key:"toJSON",value:function(){return l["default"].clone(this.attributes)}},{key:"fetch",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],r=l["default"].extend({},e);return(0,l["default"])(r).defaults({method:"GET",url:l["default"].result(this,"url")}),t(r).then((0,l["default"])(this.parse).bind(this)).then((0,l["default"])(this.set).bind(this))}},{key:"save",value:function(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],r=l["default"].extend({},e);return(0,l["default"])(r).defaults({method:this.isNew()?"POST":"PUT",url:l["default"].result(this,"url"),data:this.toJSON()}),t(r).then((0,l["default"])(this.parse).bind(this)).then((0,l["default"])(this.set).bind(this))}},{key:"destroy",value:function n(){var e=this,r=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];this.collection&&this.collection.remove(this);var n=function(){return e.trigger("destroy",e,e.collection,r),e._eventBus.$destroy()};return this.isNew()?n():((0,l["default"])(r).defaults({method:"DELETE",url:this.url("delete")}),t(r).then((0,l["default"])(this.parse).bind(this)).then(n))}}]),r}(),n=["keys","values","pairs","invert","pick","omit"];return l["default"].each(n,function(t){return r.prototype[t]=function(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return r.unshift(this.attributes),l["default"][t].apply(l["default"],r)}}),r}Object.defineProperty(r,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();r["default"]=i;var a=t("underscore"),l=n(a)},{underscore:"underscore"}]},{},[2]);
//# sourceMappingURL=index.min.js.map
