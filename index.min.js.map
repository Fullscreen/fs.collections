{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/collection.js","src/index.js","src/model.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","_dereq_","module","_classCallCheck","instance","Constructor","TypeError","Object","defineProperty","value","_createClass","defineProperties","target","props","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","default","$http","BaseModel","BaseCollection","models","opts","this","currentlyFetching","model","url","sort","comparator","parse","add","res","data","options","_this","defaults","merge","method","_","result","extend","params","req","then","reset","finally","index","id","findWhere","_this2","isSingular","isArray","removed","forEach","indexOf","push","splice","_this3","slice","added","insertAt","at","_prepareModel","colModel","get","set","attributes","attrs","save","constructor","toJSON","map","collection","attr","invoke","first","undefined","where","methods","each","_len","arguments","args","Array","_key","unshift","apply","attributeMethods","context","iterator","isFunction","_interopRequireDefault","obj","__esModule","_collection","_collection2","_model","_model2","angular","factory","_typeof","Symbol","$rootScope","urlRoot","idAttribute","_eventBus","$new","destuctors","$on","callbacks","event","unwatch","status","headers","keys","contains","$broadcast","cb","queue","wrapped","scope","_len2","_key2","concat","original","matches","filter","_len3","_key3","off","on","val","changed","_hasIdAttribute","aVal","aKey","trigger","base","isNew","encodeURIComponent","charAt","clone","bind","destroy","_this4","remove","$destroy","modelMethods","_len4","_key4"],"mappings":"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","file":"index.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/* eslint-disable no-return-assign */\n/* global _ */\n\nexport default ['$http', 'BaseModel', function ($http, BaseModel) {\n  class BaseCollection {\n    constructor (models, opts) {\n      this.currentlyFetching = false\n      this.opts = opts\n\n      if (this.opts) {\n        if (this.opts.model) { this.model = this.opts.model }\n        if (this.opts.url) { this.url = this.opts.url }\n        if (this.opts.sort) { this.sort = this.opts.sort }\n        if (this.opts.comparator) { this.comparator = this.opts.comparator }\n        if (this.opts.parse && typeof this.opts.parse === 'function') {\n          this.parse = this.opts.parse\n          delete this.opts.parse\n        }\n      }\n\n      this.models = []\n      this.length = 0\n      this.add(models, this.opts)\n    }\n\n    url () {}\n\n    parse (res) { return res.data }\n\n    fetch (options) {\n      let defaults = {\n        merge: true,\n        parse: true,\n        method: 'GET',\n        url: _(this).result('url')\n      }\n\n      options = _.extend(defaults, options)\n      if (options.params) { options.params = _.extend({}, options.params) }\n      if (options.data) { options.data = _.extend({}, options.data) }\n\n      this.currentlyFetching = true\n      let req = $http(options).then(models => {\n        if (options.reset) { this.reset() }\n        this.add(models, options)\n        return this\n      })\n\n      req.finally(() => this.currentlyFetching = false)\n\n      return req\n    }\n\n    eq (index) {\n      if (this.models) {\n        return this.models[index]\n      }\n    }\n\n    get (id) {\n      return _(this.models).findWhere({id})\n    }\n\n    remove (models) {\n      let isSingular = !_(models).isArray()\n      if (isSingular) { models = [models] }\n      let removed = []\n\n      _(models).forEach(model => {\n        let index = this.indexOf(model)\n        if (index === -1) { return }\n        removed.push(model)\n        this.models.splice(index, 1)\n        return this.length--\n      })\n\n      if (isSingular) { return removed[0] } else { return removed }\n    }\n\n    add (models, options) {\n      options = _.extend({sort: true}, options)\n\n      if (options.parse) { models = this.parse(models) }\n      if (!models) { return }\n\n      let isSingular = !_(models).isArray()\n      models = isSingular ? [models] : models.slice()\n      let added = []\n      let insertAt = typeof options.at === 'undefined' ? this.length : options.at\n\n      models.forEach(model => {\n        model = this._prepareModel(model, options)\n\n        // Add this model unless we already have it in the collection\n        let colModel = this.get(model.id)\n        if (colModel == null) {\n          added.push(model)\n          this.length++\n          this.models.splice(insertAt, 0, model)\n          return insertAt++\n        } else if (options.merge) {\n          return colModel.set(model.attributes, options)\n        }\n      })\n\n      if (options.sort) { this.sort() }\n\n      return isSingular ? added[0] : added\n    }\n\n    create (attrs, opts) {\n      let instance = this.add(attrs, opts)\n      if (instance) { return instance.save() }\n    }\n\n    clone () {\n      return new this.constructor(this.toJSON(), this.opts)\n    }\n\n    toJSON () {\n      return _.map(this.models, model => model.toJSON()\n      )\n    }\n\n    reset () {\n      this.models = []\n      this.length = 0\n      return this\n    }\n\n    sort () {\n      if (this.comparator) { return this.models.sort(this.comparator) }\n    }\n\n    _prepareModel (attrs, options) {\n      let model\n      options = _.extend({collection: this}, options)\n      if (attrs instanceof this.model || attrs instanceof BaseCollection) {\n        model = attrs\n        model.collection = this\n      } else {\n        /* eslint-disable new-cap */\n        model = new this.model(attrs, options)\n        /* eslint-enable new-cap */\n      }\n      return model\n    }\n\n    pluck (attr) {\n      return _.invoke(this.models, 'get', attr)\n    }\n\n    where (attrs, first) {\n      if (!attrs) {\n        return first ? undefined : []\n      }\n\n      let method = 'filter'\n      if (first) {\n        method = 'find'\n      }\n      return this[method](function (model) {\n        for (let key in attrs) {\n          if (attrs[key] !== model.get(key)) { return false }\n        }\n        return true\n      })\n    }\n\n    findWhere (attrs) {\n      return this.where(attrs, true)\n    }\n  }\n\n  BaseCollection.prototype.model = BaseModel\n\n  // From the Backbone source: https://github.com/jashkenas/backbone/blob/master/backbone.js#L942\n  // Underscore methods that we want to implement on the Collection.\n  // 90% of the core usefulness of Backbone Collections is actually implemented\n  // right here:\n  let methods = ['forEach', 'each', 'map', 'collect', 'reduce', 'foldl',\n    'inject', 'reduceRight', 'foldr', 'find', 'detect', 'filter', 'select',\n    'reject', 'every', 'all', 'some', 'any', 'include', 'contains', 'invoke',\n    'max', 'min', 'toArray', 'size', 'first', 'head', 'take', 'initial', 'rest',\n    'tail', 'drop', 'last', 'without', 'difference', 'indexOf', 'shuffle',\n    'lastIndexOf', 'isEmpty', 'chain']\n\n  // Mix in each Underscore method as a proxy to `Collection#models`.\n  _.each(methods, method =>\n    BaseCollection.prototype[method] = function (...args) {\n      args.unshift(this.models)\n      return _[method].apply(_, args)\n    }\n\n  )\n\n  // Underscore methods that take a property name as an argument.\n  let attributeMethods = ['groupBy', 'countBy', 'sortBy']\n\n  // Use attributes instead of properties.\n  _.each(attributeMethods, method =>\n    BaseCollection.prototype[method] = function (value, context) {\n      let iterator = _.isFunction(value) ? value : model => model.get(value)\n      return _[method](this.models, iterator, context)\n    }\n\n  )\n\n  return BaseCollection\n}]\n","/* global angular */\nimport BaseCollection from './collection.js'\nimport BaseModel from './model.js'\n\nangular.module('fs.collections', [])\n.factory('BaseCollection', BaseCollection)\n.factory('BaseModel', BaseModel)\n","/* eslint-disable no-return-assign */\n/* global _ */\nexport default ['$http', '$rootScope', function ($http, $rootScope) {\n  class BaseModel {\n    parse (res) {\n      if (res.status && res.headers) {\n        return res.data\n      } else {\n        return res\n      }\n    }\n\n    _hasIdAttribute (attrs) {\n      return _(Object.keys(attrs)).contains(this.idAttribute)\n    }\n\n    constructor (attrs = {}, opts = {}) {\n      this.urlRoot = ''\n      this.idAttribute = 'id'\n      if (opts.parse) { attrs = this.parse(attrs) }\n      this._eventBus = $rootScope.$new()\n      this._eventBus.destuctors = {}\n      this._eventBus.$on('$destroy', () => {\n        return _(this._eventBus.destuctors).each((callbacks, event) => callbacks.forEach(obj => obj.unwatch()))\n      })\n\n      if (opts.collection) { this.collection = opts.collection }\n      if (opts.urlRoot) { this.urlRoot = opts.urlRoot }\n      if (opts.idAttribute) { this.idAttribute = opts.idAttribute }\n      if (opts.defaults) { this.defaults = opts.defaults }\n\n      this.attributes = {}\n      attrs = _.extend({}, attrs)\n      attrs = _.defaults(attrs, _.result(this, 'defaults'))\n      this.set(attrs)\n    }\n\n    trigger (...args) { return this._eventBus.$broadcast.apply(this._eventBus, args) }\n\n    // Wrap the bound callback to strip off the `scope` arg, as we don't want to\n    // expose that publicly\n    on (event, cb) {\n      if (!this._eventBus.destuctors[event]) { this._eventBus.destuctors[event] = [] }\n      let queue = this._eventBus.destuctors[event]\n      let wrapped = function (scope, e, ...args) { return cb.apply(this, [e].concat(args)) }\n\n      return queue.push({\n        unwatch: this._eventBus.$on(event, wrapped),\n        original: cb\n      })\n    }\n\n    off (event, cb) {\n      let callbacks = this._eventBus.destuctors[event] || []\n      let matches = []\n\n      if (cb) {\n        matches = callbacks.filter(obj => obj.original === cb)\n      } else {\n        matches = callbacks\n      }\n\n      return matches.forEach(obj => obj.unwatch())\n    }\n\n    once (event, cb) {\n      let wrapped = (...args) => {\n        this.off(event, wrapped)\n        return cb.apply(this, args)\n      }\n\n      return this.on(event, wrapped)\n    }\n\n    has (key) { return (this.attributes[key] != null) }\n\n    get (key) { return this.attributes[key] }\n\n    set (key, val) {\n      let attrs\n      if (!key) { return this }\n\n      if (typeof key === 'object') {\n        attrs = key\n      } else {\n        attrs = {}\n        attrs[key] = val\n      }\n\n      let changed = {}\n\n      if (this._hasIdAttribute(attrs)) { this.id = attrs[this.idAttribute] }\n\n      _(attrs).each((aVal, aKey) => {\n        if (this.attributes[aKey] !== aVal) { changed[aKey] = aVal }\n        return this.attributes[aKey] = aVal\n      })\n\n      this.trigger('change', this, changed)\n      _(changed).each((val, key) => this.trigger(`change:${key}`, this, val))\n\n      return this\n    }\n\n    isNew () { if (this.id != null) { return false } else { return true } }\n\n    url () {\n      let base = _.result(this, 'urlRoot') || _.result(this.collection, 'url')\n      if (this.isNew()) {\n        return base\n      } else {\n        let id = encodeURIComponent(this.id)\n        return base + (base.charAt(base.length - 1) === '/' ? id : `/${id}`)\n      }\n    }\n\n    toJSON () {\n      return _.clone(this.attributes)\n    }\n\n    fetch (options = {}) {\n      let opts = _.extend({}, options)\n\n      _(opts).defaults({\n        method: 'GET',\n        url: _.result(this, 'url')\n      })\n      return $http(opts).then(_(this.parse).bind(this)).then(_(this.set).bind(this))\n    }\n\n    save (options = {}) {\n      let opts = _.extend({}, options)\n\n      _(opts).defaults({\n        method: this.isNew() ? 'POST' : 'PUT',\n        url: _.result(this, 'url'),\n        data: this.toJSON()\n      })\n      return $http(opts).then(_(this.parse).bind(this)).then(_(this.set).bind(this))\n    }\n\n    destroy (opts = {}) {\n      if (this.collection) { this.collection.remove(this) }\n      let destroy = () => {\n        this.trigger('destroy', this, this.collection, opts)\n        return this._eventBus.$destroy()\n      }\n\n      if (this.isNew()) {\n        return destroy()\n      } else {\n        _(opts).defaults({\n          method: 'DELETE',\n          url: this.url('delete')\n        })\n        return $http(opts).then(_(this.parse).bind(this)).then(destroy)\n      }\n    }\n  }\n\n  // From Backbone source: https://github.com/jashkenas/backbone/blob/master/backbone.js#L571\n  // Underscore methods that we want to implement on the Model.\n  let modelMethods = ['keys', 'values', 'pairs', 'invert', 'pick', 'omit']\n\n  // Mix in each Underscore method as a proxy to `Model#attributes`.\n  _.each(modelMethods, method =>\n    BaseModel.prototype[method] = function (...args) {\n      args.unshift(this.attributes)\n      return _[method].apply(_, args)\n    }\n  )\n\n  return BaseModel\n}]\n"],"sourceRoot":"/source/"}