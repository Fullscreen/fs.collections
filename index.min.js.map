{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/collection.js","index.min.js","src/index.js","src/model.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","_interopRequireDefault","obj","__esModule","default","_classCallCheck","instance","Constructor","TypeError","BaseCollection","$http","BaseModel","models","opts","this","model","currentlyFetching","url","sort","comparator","parse","add","_createClass","key","value","res","data","options","_this","defaults","merge","method","_underscore2","result","extend","params","req","then","reset","index","id","findWhere","_this2","isSingular","isArray","removed","forEach","indexOf","push","splice","_this3","slice","added","insertAt","at","_prepareModel","colModel","get","set","attributes","attrs","save","constructor","toJSON","map","collection","attr","invoke","first","undefined","where","methods","each","prototype","_len","arguments","args","Array","_key","unshift","apply","attributeMethods","context","iterator","isFunction","Object","defineProperty","defineProperties","target","props","descriptor","enumerable","configurable","writable","protoProps","staticProps","_underscore","underscore","2","_collection","_collection2","_model","_model2","_angular","_angular2","factory","./collection.js","./model.js","angular","3","$rootScope","urlRoot","idAttribute","_eventBus","$new","destuctors","$on","callbacks","event","unwatch","status","headers","keys","contains","$broadcast","cb","queue","wrapped","scope","_len2","_key2","concat","original","matches","filter","_len3","_key3","off","on","val","_typeof","changed","_hasIdAttribute","aVal","aKey","trigger","base","isNew","encodeURIComponent","charAt","clone","bind","destroy","_this4","remove","$destroy","modelMethods","_len4","_key4","Symbol"],"mappings":"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","file":"index.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/* eslint-disable no-return-assign */\nimport _ from 'underscore'\n\nexport default function BaseCollection ($http, BaseModel) {\n  class BaseCollection {\n    constructor (models, opts) {\n      this.model = BaseModel\n      this.currentlyFetching = false\n      this.opts = opts\n\n      if (this.opts) {\n        if (this.opts.model) { this.model = this.opts.model }\n        if (this.opts.url) { this.url = this.opts.url }\n        if (this.opts.sort) { this.sort = this.opts.sort }\n        if (this.opts.comparator) { this.comparator = this.opts.comparator }\n        if (this.opts.parse && typeof this.opts.parse === 'function') {\n          this.parse = this.opts.parse\n          delete this.opts.parse\n        }\n      }\n\n      this.models = []\n      this.length = 0\n      this.add(models, this.opts)\n    }\n\n    url () {}\n\n    parse (res) { return res.data }\n\n    fetch (options) {\n      let defaults = {\n        merge: true,\n        parse: true,\n        method: 'GET',\n        url: _(this).result('url')\n      }\n\n      options = _.extend(defaults, options)\n      if (options.params) { options.params = _.extend({}, options.params) }\n      if (options.data) { options.data = _.extend({}, options.data) }\n\n      this.currentlyFetching = true\n      let req = $http(options).then(models => {\n        if (options.reset) { this.reset() }\n        this.add(models, options)\n        return this\n      })\n\n      req.finally(() => this.currentlyFetching = false)\n\n      return req\n    }\n\n    eq (index) {\n      if (this.models) {\n        return this.models[index]\n      }\n    }\n\n    get (id) {\n      return _(this.models).findWhere({id})\n    }\n\n    remove (models) {\n      let isSingular = !_(models).isArray()\n      if (isSingular) { models = [models] }\n      let removed = []\n\n      _(models).forEach(model => {\n        let index = this.indexOf(model)\n        if (index === -1) { return }\n        removed.push(model)\n        this.models.splice(index, 1)\n        return this.length--\n      })\n\n      if (isSingular) { return removed[0] } else { return removed }\n    }\n\n    add (models, options) {\n      options = _.extend({sort: true}, options)\n\n      if (options.parse) { models = this.parse(models) }\n      if (!models) { return }\n\n      let isSingular = !_(models).isArray()\n      models = isSingular ? [models] : models.slice()\n      let added = []\n      let insertAt = typeof options.at === 'undefined' ? this.length : options.at\n\n      models.forEach(model => {\n        model = this._prepareModel(model, options)\n\n        // Add this model unless we already have it in the collection\n        let colModel = this.get(model.id)\n        if (colModel == null) {\n          added.push(model)\n          this.length++\n          this.models.splice(insertAt, 0, model)\n          return insertAt++\n        } else if (options.merge) {\n          return colModel.set(model.attributes, options)\n        }\n      })\n\n      if (options.sort) { this.sort() }\n\n      return isSingular ? added[0] : added\n    }\n\n    create (attrs, opts) {\n      let instance = this.add(attrs, opts)\n      if (instance) { return instance.save() }\n    }\n\n    clone () {\n      return new this.constructor(this.toJSON(), this.opts)\n    }\n\n    toJSON () {\n      return _.map(this.models, model => model.toJSON()\n      )\n    }\n\n    reset () {\n      this.models = []\n      this.length = 0\n      return this\n    }\n\n    sort () {\n      if (this.comparator) { return this.models.sort(this.comparator) }\n    }\n\n    _prepareModel (attrs, options) {\n      let model\n      options = _.extend({collection: this}, options)\n      if (attrs instanceof this.model || attrs instanceof BaseCollection) {\n        model = attrs\n        model.collection = this\n      } else {\n        /* eslint-disable new-cap */\n        model = new this.model(attrs, options)\n        /* eslint-enable new-cap */\n      }\n      return model\n    }\n\n    pluck (attr) {\n      return _.invoke(this.models, 'get', attr)\n    }\n\n    where (attrs, first) {\n      if (!attrs) {\n        return first ? undefined : []\n      }\n\n      let method = 'filter'\n      if (first) {\n        method = 'find'\n      }\n      return this[method](function (model) {\n        for (let key in attrs) {\n          if (attrs[key] !== model.get(key)) { return false }\n        }\n        return true\n      })\n    }\n\n    findWhere (attrs) {\n      return this.where(attrs, true)\n    }\n  }\n\n  // From the Backbone source: https://github.com/jashkenas/backbone/blob/master/backbone.js#L942\n  // Underscore methods that we want to implement on the Collection.\n  // 90% of the core usefulness of Backbone Collections is actually implemented\n  // right here:\n  let methods = ['forEach', 'each', 'map', 'collect', 'reduce', 'foldl',\n    'inject', 'reduceRight', 'foldr', 'find', 'detect', 'filter', 'select',\n    'reject', 'every', 'all', 'some', 'any', 'include', 'contains', 'invoke',\n    'max', 'min', 'toArray', 'size', 'first', 'head', 'take', 'initial', 'rest',\n    'tail', 'drop', 'last', 'without', 'difference', 'indexOf', 'shuffle',\n    'lastIndexOf', 'isEmpty', 'chain']\n\n  // Mix in each Underscore method as a proxy to `Collection#models`.\n  _.each(methods, method =>\n    BaseCollection.prototype[method] = function (...args) {\n      args.unshift(this.models)\n      return _[method].apply(_, args)\n    }\n\n  )\n\n  // Underscore methods that take a property name as an argument.\n  let attributeMethods = ['groupBy', 'countBy', 'sortBy']\n\n  // Use attributes instead of properties.\n  _.each(attributeMethods, method =>\n    BaseCollection.prototype[method] = function (value, context) {\n      let iterator = _.isFunction(value) ? value : model => model.get(value)\n      return _[method](this.models, iterator, context)\n    }\n\n  )\n\n  return BaseCollection\n}\n","(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /* eslint-disable no-return-assign */\n\n\nexports.default = BaseCollection;\n\nvar _underscore = require('underscore');\n\nvar _underscore2 = _interopRequireDefault(_underscore);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction BaseCollection($http, BaseModel) {\n  var BaseCollection = function () {\n    function BaseCollection(models, opts) {\n      _classCallCheck(this, BaseCollection);\n\n      this.model = BaseModel;\n      this.currentlyFetching = false;\n      this.opts = opts;\n\n      if (this.opts) {\n        if (this.opts.model) {\n          this.model = this.opts.model;\n        }\n        if (this.opts.url) {\n          this.url = this.opts.url;\n        }\n        if (this.opts.sort) {\n          this.sort = this.opts.sort;\n        }\n        if (this.opts.comparator) {\n          this.comparator = this.opts.comparator;\n        }\n        if (this.opts.parse && typeof this.opts.parse === 'function') {\n          this.parse = this.opts.parse;\n          delete this.opts.parse;\n        }\n      }\n\n      this.models = [];\n      this.length = 0;\n      this.add(models, this.opts);\n    }\n\n    _createClass(BaseCollection, [{\n      key: 'url',\n      value: function url() {}\n    }, {\n      key: 'parse',\n      value: function parse(res) {\n        return res.data;\n      }\n    }, {\n      key: 'fetch',\n      value: function fetch(options) {\n        var _this = this;\n\n        var defaults = {\n          merge: true,\n          parse: true,\n          method: 'GET',\n          url: (0, _underscore2.default)(this).result('url')\n        };\n\n        options = _underscore2.default.extend(defaults, options);\n        if (options.params) {\n          options.params = _underscore2.default.extend({}, options.params);\n        }\n        if (options.data) {\n          options.data = _underscore2.default.extend({}, options.data);\n        }\n\n        this.currentlyFetching = true;\n        var req = $http(options).then(function (models) {\n          if (options.reset) {\n            _this.reset();\n          }\n          _this.add(models, options);\n          return _this;\n        });\n\n        req.finally(function () {\n          return _this.currentlyFetching = false;\n        });\n\n        return req;\n      }\n    }, {\n      key: 'eq',\n      value: function eq(index) {\n        if (this.models) {\n          return this.models[index];\n        }\n      }\n    }, {\n      key: 'get',\n      value: function get(id) {\n        return (0, _underscore2.default)(this.models).findWhere({ id: id });\n      }\n    }, {\n      key: 'remove',\n      value: function remove(models) {\n        var _this2 = this;\n\n        var isSingular = !(0, _underscore2.default)(models).isArray();\n        if (isSingular) {\n          models = [models];\n        }\n        var removed = [];\n\n        (0, _underscore2.default)(models).forEach(function (model) {\n          var index = _this2.indexOf(model);\n          if (index === -1) {\n            return;\n          }\n          removed.push(model);\n          _this2.models.splice(index, 1);\n          return _this2.length--;\n        });\n\n        if (isSingular) {\n          return removed[0];\n        } else {\n          return removed;\n        }\n      }\n    }, {\n      key: 'add',\n      value: function add(models, options) {\n        var _this3 = this;\n\n        options = _underscore2.default.extend({ sort: true }, options);\n\n        if (options.parse) {\n          models = this.parse(models);\n        }\n        if (!models) {\n          return;\n        }\n\n        var isSingular = !(0, _underscore2.default)(models).isArray();\n        models = isSingular ? [models] : models.slice();\n        var added = [];\n        var insertAt = typeof options.at === 'undefined' ? this.length : options.at;\n\n        models.forEach(function (model) {\n          model = _this3._prepareModel(model, options);\n\n          // Add this model unless we already have it in the collection\n          var colModel = _this3.get(model.id);\n          if (colModel == null) {\n            added.push(model);\n            _this3.length++;\n            _this3.models.splice(insertAt, 0, model);\n            return insertAt++;\n          } else if (options.merge) {\n            return colModel.set(model.attributes, options);\n          }\n        });\n\n        if (options.sort) {\n          this.sort();\n        }\n\n        return isSingular ? added[0] : added;\n      }\n    }, {\n      key: 'create',\n      value: function create(attrs, opts) {\n        var instance = this.add(attrs, opts);\n        if (instance) {\n          return instance.save();\n        }\n      }\n    }, {\n      key: 'clone',\n      value: function clone() {\n        return new this.constructor(this.toJSON(), this.opts);\n      }\n    }, {\n      key: 'toJSON',\n      value: function toJSON() {\n        return _underscore2.default.map(this.models, function (model) {\n          return model.toJSON();\n        });\n      }\n    }, {\n      key: 'reset',\n      value: function reset() {\n        this.models = [];\n        this.length = 0;\n        return this;\n      }\n    }, {\n      key: 'sort',\n      value: function sort() {\n        if (this.comparator) {\n          return this.models.sort(this.comparator);\n        }\n      }\n    }, {\n      key: '_prepareModel',\n      value: function _prepareModel(attrs, options) {\n        var model = void 0;\n        options = _underscore2.default.extend({ collection: this }, options);\n        if (attrs instanceof this.model || attrs instanceof BaseCollection) {\n          model = attrs;\n          model.collection = this;\n        } else {\n          /* eslint-disable new-cap */\n          model = new this.model(attrs, options);\n          /* eslint-enable new-cap */\n        }\n        return model;\n      }\n    }, {\n      key: 'pluck',\n      value: function pluck(attr) {\n        return _underscore2.default.invoke(this.models, 'get', attr);\n      }\n    }, {\n      key: 'where',\n      value: function where(attrs, first) {\n        if (!attrs) {\n          return first ? undefined : [];\n        }\n\n        var method = 'filter';\n        if (first) {\n          method = 'find';\n        }\n        return this[method](function (model) {\n          for (var key in attrs) {\n            if (attrs[key] !== model.get(key)) {\n              return false;\n            }\n          }\n          return true;\n        });\n      }\n    }, {\n      key: 'findWhere',\n      value: function findWhere(attrs) {\n        return this.where(attrs, true);\n      }\n    }]);\n\n    return BaseCollection;\n  }();\n\n  // From the Backbone source: https://github.com/jashkenas/backbone/blob/master/backbone.js#L942\n  // Underscore methods that we want to implement on the Collection.\n  // 90% of the core usefulness of Backbone Collections is actually implemented\n  // right here:\n\n\n  var methods = ['forEach', 'each', 'map', 'collect', 'reduce', 'foldl', 'inject', 'reduceRight', 'foldr', 'find', 'detect', 'filter', 'select', 'reject', 'every', 'all', 'some', 'any', 'include', 'contains', 'invoke', 'max', 'min', 'toArray', 'size', 'first', 'head', 'take', 'initial', 'rest', 'tail', 'drop', 'last', 'without', 'difference', 'indexOf', 'shuffle', 'lastIndexOf', 'isEmpty', 'chain'];\n\n  // Mix in each Underscore method as a proxy to `Collection#models`.\n  _underscore2.default.each(methods, function (method) {\n    return BaseCollection.prototype[method] = function () {\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      args.unshift(this.models);\n      return _underscore2.default[method].apply(_underscore2.default, args);\n    };\n  });\n\n  // Underscore methods that take a property name as an argument.\n  var attributeMethods = ['groupBy', 'countBy', 'sortBy'];\n\n  // Use attributes instead of properties.\n  _underscore2.default.each(attributeMethods, function (method) {\n    return BaseCollection.prototype[method] = function (value, context) {\n      var iterator = _underscore2.default.isFunction(value) ? value : function (model) {\n        return model.get(value);\n      };\n      return _underscore2.default[method](this.models, iterator, context);\n    };\n  });\n\n  return BaseCollection;\n}\n\n},{\"underscore\":\"underscore\"}],2:[function(require,module,exports){\n'use strict';\n\nvar _collection = require('./collection.js');\n\nvar _collection2 = _interopRequireDefault(_collection);\n\nvar _model = require('./model.js');\n\nvar _model2 = _interopRequireDefault(_model);\n\nvar _angular = require('angular');\n\nvar _angular2 = _interopRequireDefault(_angular);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n_angular2.default.module('fs.collections', []).factory('BaseCollection', _collection2.default).factory('BaseModel', _model2.default);\n\n},{\"./collection.js\":1,\"./model.js\":3,\"angular\":\"angular\"}],3:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /* eslint-disable no-return-assign */\n\n\nexports.default = BaseModel;\n\nvar _underscore = require('underscore');\n\nvar _underscore2 = _interopRequireDefault(_underscore);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction BaseModel($http, $rootScope) {\n  var BaseModel = function () {\n    _createClass(BaseModel, [{\n      key: 'parse',\n      value: function parse(res) {\n        if (res.status && res.headers) {\n          return res.data;\n        } else {\n          return res;\n        }\n      }\n    }, {\n      key: '_hasIdAttribute',\n      value: function _hasIdAttribute(attrs) {\n        return (0, _underscore2.default)(Object.keys(attrs)).contains(this.idAttribute);\n      }\n    }]);\n\n    function BaseModel() {\n      var _this = this;\n\n      var attrs = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n      var opts = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      _classCallCheck(this, BaseModel);\n\n      this.urlRoot = '';\n      this.idAttribute = 'id';\n      if (opts.parse) {\n        attrs = this.parse(attrs);\n      }\n      this._eventBus = $rootScope.$new();\n      this._eventBus.destuctors = {};\n      this._eventBus.$on('$destroy', function () {\n        return (0, _underscore2.default)(_this._eventBus.destuctors).each(function (callbacks, event) {\n          return callbacks.forEach(function (obj) {\n            return obj.unwatch();\n          });\n        });\n      });\n\n      if (opts.collection) {\n        this.collection = opts.collection;\n      }\n      if (opts.urlRoot) {\n        this.urlRoot = opts.urlRoot;\n      }\n      if (opts.idAttribute) {\n        this.idAttribute = opts.idAttribute;\n      }\n      if (opts.defaults) {\n        this.defaults = opts.defaults;\n      }\n\n      this.attributes = {};\n      attrs = _underscore2.default.extend({}, attrs);\n      attrs = _underscore2.default.defaults(attrs, _underscore2.default.result(this, 'defaults'));\n      this.set(attrs);\n    }\n\n    _createClass(BaseModel, [{\n      key: 'trigger',\n      value: function trigger() {\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        return this._eventBus.$broadcast.apply(this._eventBus, args);\n      }\n\n      // Wrap the bound callback to strip off the `scope` arg, as we don't want to\n      // expose that publicly\n\n    }, {\n      key: 'on',\n      value: function on(event, cb) {\n        if (!this._eventBus.destuctors[event]) {\n          this._eventBus.destuctors[event] = [];\n        }\n        var queue = this._eventBus.destuctors[event];\n        var wrapped = function wrapped(scope, e) {\n          for (var _len2 = arguments.length, args = Array(_len2 > 2 ? _len2 - 2 : 0), _key2 = 2; _key2 < _len2; _key2++) {\n            args[_key2 - 2] = arguments[_key2];\n          }\n\n          return cb.apply(this, [e].concat(args));\n        };\n\n        return queue.push({\n          unwatch: this._eventBus.$on(event, wrapped),\n          original: cb\n        });\n      }\n    }, {\n      key: 'off',\n      value: function off(event, cb) {\n        var callbacks = this._eventBus.destuctors[event] || [];\n        var matches = [];\n\n        if (cb) {\n          matches = callbacks.filter(function (obj) {\n            return obj.original === cb;\n          });\n        } else {\n          matches = callbacks;\n        }\n\n        return matches.forEach(function (obj) {\n          return obj.unwatch();\n        });\n      }\n    }, {\n      key: 'once',\n      value: function once(event, cb) {\n        var _this2 = this;\n\n        var wrapped = function wrapped() {\n          for (var _len3 = arguments.length, args = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n            args[_key3] = arguments[_key3];\n          }\n\n          _this2.off(event, wrapped);\n          return cb.apply(_this2, args);\n        };\n\n        return this.on(event, wrapped);\n      }\n    }, {\n      key: 'has',\n      value: function has(key) {\n        return this.attributes[key] != null;\n      }\n    }, {\n      key: 'get',\n      value: function get(key) {\n        return this.attributes[key];\n      }\n    }, {\n      key: 'set',\n      value: function set(key, val) {\n        var _this3 = this;\n\n        var attrs = void 0;\n        if (!key) {\n          return this;\n        }\n\n        if ((typeof key === 'undefined' ? 'undefined' : _typeof(key)) === 'object') {\n          attrs = key;\n        } else {\n          attrs = {};\n          attrs[key] = val;\n        }\n\n        var changed = {};\n\n        if (this._hasIdAttribute(attrs)) {\n          this.id = attrs[this.idAttribute];\n        }\n\n        (0, _underscore2.default)(attrs).each(function (aVal, aKey) {\n          if (_this3.attributes[aKey] !== aVal) {\n            changed[aKey] = aVal;\n          }\n          return _this3.attributes[aKey] = aVal;\n        });\n\n        this.trigger('change', this, changed);\n        (0, _underscore2.default)(changed).each(function (val, key) {\n          return _this3.trigger('change:' + key, _this3, val);\n        });\n\n        return this;\n      }\n    }, {\n      key: 'isNew',\n      value: function isNew() {\n        if (this.id != null) {\n          return false;\n        } else {\n          return true;\n        }\n      }\n    }, {\n      key: 'url',\n      value: function url() {\n        var base = _underscore2.default.result(this, 'urlRoot') || _underscore2.default.result(this.collection, 'url');\n        if (this.isNew()) {\n          return base;\n        } else {\n          var id = encodeURIComponent(this.id);\n          return base + (base.charAt(base.length - 1) === '/' ? id : '/' + id);\n        }\n      }\n    }, {\n      key: 'toJSON',\n      value: function toJSON() {\n        return _underscore2.default.clone(this.attributes);\n      }\n    }, {\n      key: 'fetch',\n      value: function fetch() {\n        var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n        var opts = _underscore2.default.extend({}, options);\n\n        (0, _underscore2.default)(opts).defaults({\n          method: 'GET',\n          url: _underscore2.default.result(this, 'url')\n        });\n        return $http(opts).then((0, _underscore2.default)(this.parse).bind(this)).then((0, _underscore2.default)(this.set).bind(this));\n      }\n    }, {\n      key: 'save',\n      value: function save() {\n        var options = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n        var opts = _underscore2.default.extend({}, options);\n\n        (0, _underscore2.default)(opts).defaults({\n          method: this.isNew() ? 'POST' : 'PUT',\n          url: _underscore2.default.result(this, 'url'),\n          data: this.toJSON()\n        });\n        return $http(opts).then((0, _underscore2.default)(this.parse).bind(this)).then((0, _underscore2.default)(this.set).bind(this));\n      }\n    }, {\n      key: 'destroy',\n      value: function destroy() {\n        var _this4 = this;\n\n        var opts = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n        if (this.collection) {\n          this.collection.remove(this);\n        }\n        var destroy = function destroy() {\n          _this4.trigger('destroy', _this4, _this4.collection, opts);\n          return _this4._eventBus.$destroy();\n        };\n\n        if (this.isNew()) {\n          return destroy();\n        } else {\n          (0, _underscore2.default)(opts).defaults({\n            method: 'DELETE',\n            url: this.url('delete')\n          });\n          return $http(opts).then((0, _underscore2.default)(this.parse).bind(this)).then(destroy);\n        }\n      }\n    }]);\n\n    return BaseModel;\n  }();\n\n  // From Backbone source: https://github.com/jashkenas/backbone/blob/master/backbone.js#L571\n  // Underscore methods that we want to implement on the Model.\n\n\n  var modelMethods = ['keys', 'values', 'pairs', 'invert', 'pick', 'omit'];\n\n  // Mix in each Underscore method as a proxy to `Model#attributes`.\n  _underscore2.default.each(modelMethods, function (method) {\n    return BaseModel.prototype[method] = function () {\n      for (var _len4 = arguments.length, args = Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        args[_key4] = arguments[_key4];\n      }\n\n      args.unshift(this.attributes);\n      return _underscore2.default[method].apply(_underscore2.default, args);\n    };\n  });\n\n  return BaseModel;\n}\n\n},{\"underscore\":\"underscore\"}]},{},[2])\n\n","import BaseCollection from './collection.js'\nimport BaseModel from './model.js'\nimport angular from 'angular'\n\nangular.module('fs.collections', [])\n.factory('BaseCollection', BaseCollection)\n.factory('BaseModel', BaseModel)\n","/* eslint-disable no-return-assign */\nimport _ from 'underscore'\nexport default function BaseModel ($http, $rootScope) {\n  class BaseModel {\n    parse (res) {\n      if (res.status && res.headers) {\n        return res.data\n      } else {\n        return res\n      }\n    }\n\n    _hasIdAttribute (attrs) {\n      return _(Object.keys(attrs)).contains(this.idAttribute)\n    }\n\n    constructor (attrs = {}, opts = {}) {\n      this.urlRoot = ''\n      this.idAttribute = 'id'\n      if (opts.parse) { attrs = this.parse(attrs) }\n      this._eventBus = $rootScope.$new()\n      this._eventBus.destuctors = {}\n      this._eventBus.$on('$destroy', () => {\n        return _(this._eventBus.destuctors).each((callbacks, event) => callbacks.forEach(obj => obj.unwatch()))\n      })\n\n      if (opts.collection) { this.collection = opts.collection }\n      if (opts.urlRoot) { this.urlRoot = opts.urlRoot }\n      if (opts.idAttribute) { this.idAttribute = opts.idAttribute }\n      if (opts.defaults) { this.defaults = opts.defaults }\n\n      this.attributes = {}\n      attrs = _.extend({}, attrs)\n      attrs = _.defaults(attrs, _.result(this, 'defaults'))\n      this.set(attrs)\n    }\n\n    trigger (...args) { return this._eventBus.$broadcast.apply(this._eventBus, args) }\n\n    // Wrap the bound callback to strip off the `scope` arg, as we don't want to\n    // expose that publicly\n    on (event, cb) {\n      if (!this._eventBus.destuctors[event]) { this._eventBus.destuctors[event] = [] }\n      let queue = this._eventBus.destuctors[event]\n      let wrapped = function (scope, e, ...args) { return cb.apply(this, [e].concat(args)) }\n\n      return queue.push({\n        unwatch: this._eventBus.$on(event, wrapped),\n        original: cb\n      })\n    }\n\n    off (event, cb) {\n      let callbacks = this._eventBus.destuctors[event] || []\n      let matches = []\n\n      if (cb) {\n        matches = callbacks.filter(obj => obj.original === cb)\n      } else {\n        matches = callbacks\n      }\n\n      return matches.forEach(obj => obj.unwatch())\n    }\n\n    once (event, cb) {\n      let wrapped = (...args) => {\n        this.off(event, wrapped)\n        return cb.apply(this, args)\n      }\n\n      return this.on(event, wrapped)\n    }\n\n    has (key) { return (this.attributes[key] != null) }\n\n    get (key) { return this.attributes[key] }\n\n    set (key, val) {\n      let attrs\n      if (!key) { return this }\n\n      if (typeof key === 'object') {\n        attrs = key\n      } else {\n        attrs = {}\n        attrs[key] = val\n      }\n\n      let changed = {}\n\n      if (this._hasIdAttribute(attrs)) { this.id = attrs[this.idAttribute] }\n\n      _(attrs).each((aVal, aKey) => {\n        if (this.attributes[aKey] !== aVal) { changed[aKey] = aVal }\n        return this.attributes[aKey] = aVal\n      })\n\n      this.trigger('change', this, changed)\n      _(changed).each((val, key) => this.trigger(`change:${key}`, this, val))\n\n      return this\n    }\n\n    isNew () { if (this.id != null) { return false } else { return true } }\n\n    url () {\n      let base = _.result(this, 'urlRoot') || _.result(this.collection, 'url')\n      if (this.isNew()) {\n        return base\n      } else {\n        let id = encodeURIComponent(this.id)\n        return base + (base.charAt(base.length - 1) === '/' ? id : `/${id}`)\n      }\n    }\n\n    toJSON () {\n      return _.clone(this.attributes)\n    }\n\n    fetch (options = {}) {\n      let opts = _.extend({}, options)\n\n      _(opts).defaults({\n        method: 'GET',\n        url: _.result(this, 'url')\n      })\n      return $http(opts).then(_(this.parse).bind(this)).then(_(this.set).bind(this))\n    }\n\n    save (options = {}) {\n      let opts = _.extend({}, options)\n\n      _(opts).defaults({\n        method: this.isNew() ? 'POST' : 'PUT',\n        url: _.result(this, 'url'),\n        data: this.toJSON()\n      })\n      return $http(opts).then(_(this.parse).bind(this)).then(_(this.set).bind(this))\n    }\n\n    destroy (opts = {}) {\n      if (this.collection) { this.collection.remove(this) }\n      let destroy = () => {\n        this.trigger('destroy', this, this.collection, opts)\n        return this._eventBus.$destroy()\n      }\n\n      if (this.isNew()) {\n        return destroy()\n      } else {\n        _(opts).defaults({\n          method: 'DELETE',\n          url: this.url('delete')\n        })\n        return $http(opts).then(_(this.parse).bind(this)).then(destroy)\n      }\n    }\n  }\n\n  // From Backbone source: https://github.com/jashkenas/backbone/blob/master/backbone.js#L571\n  // Underscore methods that we want to implement on the Model.\n  let modelMethods = ['keys', 'values', 'pairs', 'invert', 'pick', 'omit']\n\n  // Mix in each Underscore method as a proxy to `Model#attributes`.\n  _.each(modelMethods, method =>\n    BaseModel.prototype[method] = function (...args) {\n      args.unshift(this.attributes)\n      return _[method].apply(_, args)\n    }\n  )\n\n  return BaseModel\n}\n"],"sourceRoot":"/source/"}